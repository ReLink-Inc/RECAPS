<!DOCTYPE html>
<html lang="en">
<%- include('partials/_head.ejs') %>
  <body>
<%- include('partials/_header.ejs') %>
    <main role="main">
      <div class="container mt-5">
        <h2>Submit Your Research Question</h2>
        <form id="questionForm" action="/api/question" method="POST">
          <div class="mb-3">
            <label for="questionText" class="form-label">Research Question</label>
            <textarea class="form-control" id="questionText" name="questionText" rows="3" required></textarea>
          </div>
          <div class="mb-3">
            <button type="submit" class="btn btn-primary">Submit Question</button>
          </div>
        </form>
        <div id="subQuestionsContainer" class="mt-5">
          <!-- Sub-questions will be displayed here -->
        </div>
        <div id="dagContainer" style="width: 100%; overflow: auto; height: 600px; position: relative;">
            <svg id="dagVisualization" width="150%" height="150%"></svg>
        </div>
        <div id="explanationContainer" class="mt-5">
          <!-- Explanation will be displayed here -->
        </div>
      </div>
    </main>
    <!-- Modal for displaying full content of a node -->
    <div class="modal fade" id="detailsModal" tabindex="-1" aria-labelledby="detailsModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalTitle">Node Details</h5>
            <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body" id="modalBody">
            <!-- Node details will be inserted here -->
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </body>
<%- include('partials/_footer.ejs') %>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="/js/questionForm.js"></script>
<script src="/js/dagVisualization.js"></script>
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
</html>